import{_ as e,y as a,Y as t,r as l,ad as u,M as r,aj as n,a as o,G as i,H as s,P as d,a0 as g}from"./index.3e972bdf.js";import{u as c,q as v}from"./index.aadc5e17.js";import"./index.03bb1a20.js";var p=e(a({inheritAttrs:!1,__name:"surveyForm",props:{data:{type:[],default:[]}},emits:["update:data","update:visible","show","adminId"],setup(e,{emit:a}){const{activate:p,disable:h,isActivate:f,updateWidget:y,currentWidget:m}=t.exports.useWidget(),_=l(!1),{useForm:w,useForms:x}=c();u();const z=l("default"),C=l({span:0}),b=l({span:0}),U=l(),A=l({name:"0",type:"0",geographicInfo:"",centerLongitude:0,centerLatitude:0,groundFeatureUrl:"",groundFeature:{artificial:"0",anomalous:"0",terrace:"0"},slopeInfo:{slope:"0",multipleSlopes:"0",singleAspect:"0",multipleSlopeDirections:"0"},range:{frontHeight:0,rearHeight:0,frontWidth:0,rearWidth:0,diff:0,area:0},coordinate:{northwestCorner:{longitude:"0",latitude:"0",height:"0"},northeastCorner:{longitude:"0",latitude:"0",height:"0"},southwestCorner:{longitude:"0",latitude:"0",height:"0"},southeastCorner:{longitude:"0",latitude:"0",height:"0"},fileUrl:"0"},geology:"0"});l(0),r([]);const q={name:{required:!0,message:"Please select Activity zone",trigger:"change"},type:{required:!0,message:"Please select Activity zone",trigger:"change"},geographicInfo:{required:!0,message:"Please select Activity zone",trigger:"change"},centerLongitude:{required:!0,message:"Please select Activity zone",trigger:"change"},centerLatitude:{required:!0,message:"Please select Activity zone",trigger:"change"},groundFeatureUrl:{required:!1,message:"Please select Activity zone",trigger:"change"},groundFeature:{anomalous:{required:!0,message:"Please select Activity zone",trigger:"change"},artificial:{required:!0,message:"Please select Activity zone",trigger:"change"},terrace:{required:!0,message:"Please select Activity zone",trigger:"change"}},slopeInfo:{slope:{required:!0,message:"Please select Activity zone",trigger:"change"},multipleSlopes:{required:!0,message:"Please select Activity zone",trigger:"change"},singleAspect:{required:!0,message:"Please select Activity zone",trigger:"change"},multipleSlopeDirections:{required:!0,message:"Please select Activity zone",trigger:"change"}},range:{frontHeight:{required:!0,message:"Please select Activity zone",trigger:"change"},Trailingedgeelevation:{required:!0,message:"Please select Activity zone",trigger:"change"},rearHeight:{required:!0,message:"Please select Activity zone",trigger:"change"},frontWidth:{required:!0,message:"Please select Activity zone",trigger:"change"},rearWidth:{required:!0,message:"Please select Activity zone",trigger:"change"},area:{required:!0,message:"Please select Activity zone",trigger:"change"},diff:{required:!0,message:"Please select Activity zone",trigger:"change"}},coordinate:{northwestCorner:{longitude:{required:!0,message:"Please select Activity zone",trigger:"change"},latitude:{required:!0,message:"Please select Activity zone",trigger:"change"},height:{required:!0,message:"Please select Activity zone",trigger:"change"}},northeastCorner:{longitude:{required:!0,message:"Please select Activity zone",trigger:"change"},latitude:{required:!0,message:"Please select Activity zone",trigger:"change"},height:{required:!0,message:"Please select Activity zone",trigger:"change"}},southwestCorner:{longitude:{required:!0,message:"Please select Activity zone",trigger:"change"},latitude:{required:!0,message:"Please select Activity zone",trigger:"change"},height:{required:!0,message:"Please select Activity zone",trigger:"change"}},southeastCorner:{longitude:{required:!0,message:"Please select Activity zone",trigger:"change"},latitude:{required:!0,message:"Please select Activity zone",trigger:"change"},height:{required:!0,message:"Please select Activity zone",trigger:"change"}},fileUrl:{required:!0,message:"Please select Activity zone",trigger:"change"}},geology:{required:!0,message:"Please select Activity zone",trigger:"change"}},P=l([]),F=[],I=async e=>{console.log(e,"file");const a=await x.addphote(e);return A.value.groundFeatureUrl=a.replace("http://localhost:15130/","http://1.14.72.127/"),F.push(a.replace("http://localhost:15130/","http://1.14.72.127/")),P.value.push({uid:"-1",name:"xxx.png",status:"done",url:a.replace("http://localhost:15130/","http://1.14.72.127/")}),!1},j=e=>{const a=P.value.indexOf(e),t=P.value.slice();t.splice(a,1),P.value=t},S=l([]),W=l(!1),H=async()=>{U.value.validate().then((()=>{console.log(">>>>>>>>>>>>>>>"),l();const e=F.join();console.log(e),A.value.groundFeatureUrl=e,x.addforms(JSON.parse(JSON.stringify(A.value)));const t=JSON.parse(JSON.stringify(A.value));w.AddData(t),a("update:data",S.value),console.log(S.value),U.value.resetFields(),a("show",W.value),y("Survey-report",{data:S.value}),_.value=!1})).catch((e=>{console.log("error",e)})),console.log(1)};m.onUpdate((async({id:e,show:a})=>{if(_.value=a,console.log(e,"id"),e||0===e){const a=await v(e);delete a.id,console.log(a,"tabledatas"),A.value=a}}));const L=()=>{alert("nihao"),console.log("nihaoa-----------")},k=()=>{U.value.resetFields(),_.value=!1};return(e,a)=>{const t=n("a-input"),l=n("a-form-item"),u=n("a-col"),r=n("a-row"),c=n("a-button"),v=n("a-upload"),p=n("a-space"),h=n("a-form"),f=n("mars-pannel");return o(),i(f,{visible:_.value,title:"我的弹窗",width:"800",right:"120",top:"150",bottom:"40",zIndex:"100"},{default:s((()=>[d(h,{ref_key:"formRef",ref:U,model:A.value,"label-col":C.value,"wrapper-col":b.value,rules:q,onFinish:L},{default:s((()=>[d(r,{size:z.value,type:"flex",justify:"center",gutter:[0,16]},{default:s((()=>[d(u,{span:8},{default:s((()=>[d(l,{label:"名称",name:"name"},{default:s((()=>[d(t,{style:{width:"150px"},value:A.value.name,"onUpdate:value":a[0]||(a[0]=e=>A.value.name=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:8},{default:s((()=>[d(l,{label:"类型",name:"type"},{default:s((()=>[d(t,{style:{width:"150px"},value:A.value.type,"onUpdate:value":a[1]||(a[1]=e=>A.value.type=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"]),d(r,{size:z.value,type:"flex",justify:"center",gutter:[0,16]},{default:s((()=>[d(u,{span:8},{default:s((()=>[d(l,{label:"位置信息",name:"geographicInfo"},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.geographicInfo,"onUpdate:value":a[2]||(a[2]=e=>A.value.geographicInfo=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:8},{default:s((()=>[d(l,{label:"中心经度",name:"centerLongitude"},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.centerLongitude,"onUpdate:value":a[3]||(a[3]=e=>A.value.centerLongitude=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:8},{default:s((()=>[d(l,{label:"中心维度",name:"centerLatitude"},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.centerLatitude,"onUpdate:value":a[4]||(a[4]=e=>A.value.centerLatitude=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"]),d(l,{label:"地物信息全局",name:"groundFeatureUrl"},{default:s((()=>[d(r,{size:z.value,style:{height:"150px"},type:"flex",justify:"center",gutter:[0,16]},{default:s((()=>[d(u,{span:8},{default:s((()=>[d(v,{"list-type":"picture","file-list":P.value,onRemove:j,"before-upload":I},{default:s((()=>[d(c,null,{default:s((()=>[g(" upload ")])),_:1})])),_:1},8,["file-list"])])),_:1})])),_:1},8,["size"])])),_:1}),d(l,{label:"地物信息(单独地物)"},{default:s((()=>[d(r,{size:z.value,type:"flex",justify:"center",gutter:[15,16],style:{height:"70px"}},{default:s((()=>[d(u,{span:8},{default:s((()=>[d(l,{label:"变形破坏的建构筑物",name:["groundFeature","anomalous"]},{default:s((()=>[d(t,{style:{width:"200px"},value:A.value.groundFeature.anomalous,"onUpdate:value":a[5]||(a[5]=e=>A.value.groundFeature.anomalous=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"]),d(r,{size:z.value,type:"flex",justify:"space-around",gutter:[0,16],style:{height:"50px"}},{default:s((()=>[d(u,{span:8},{default:s((()=>[d(l,{label:"人工护坡",name:["groundFeature","artificial"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.groundFeature.artificial,"onUpdate:value":a[6]||(a[6]=e=>A.value.groundFeature.artificial=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:8},{default:s((()=>[d(l,{label:"梯田",name:["groundFeature","terrace"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.groundFeature.terrace,"onUpdate:value":a[7]||(a[7]=e=>A.value.groundFeature.terrace=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"])])),_:1}),d(l,{label:"坡度(°)"},{default:s((()=>[d(r,{size:z.value,type:"flex",justify:"center",gutter:[0,16]},{default:s((()=>[d(u,{span:8},{default:s((()=>[d(l,{label:"单一坡度",name:["slopeInfo","slope"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.slopeInfo.slope,"onUpdate:value":a[8]||(a[8]=e=>A.value.slopeInfo.slope=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:8},{default:s((()=>[d(l,{label:"多种坡度",name:["slopeInfo","multipleSlopes"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.slopeInfo.multipleSlopes,"onUpdate:value":a[9]||(a[9]=e=>A.value.slopeInfo.multipleSlopes=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"])])),_:1}),d(l,{label:"坡向(°)"},{default:s((()=>[d(r,{size:z.value,type:"flex",justify:"center",gutter:[0,16]},{default:s((()=>[d(u,{span:8},{default:s((()=>[d(l,{label:"单一坡向",name:["slopeInfo","singleAspect"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.slopeInfo.singleAspect,"onUpdate:value":a[10]||(a[10]=e=>A.value.slopeInfo.singleAspect=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:8},{default:s((()=>[d(l,{label:"多种坡向",name:["slopeInfo","multipleSlopeDirections"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.slopeInfo.multipleSlopeDirections,"onUpdate:value":a[11]||(a[11]=e=>A.value.slopeInfo.multipleSlopeDirections=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"])])),_:1}),d(l,{label:"范围"},{default:s((()=>[d(p,{size:15},{default:s((()=>[d(r,{size:z.value,type:"flex",justify:"space-around",gutter:[30,16]},{default:s((()=>[d(u,{span:8},{default:s((()=>[d(l,{label:"前缘高程",name:["range","frontHeight"]},{default:s((()=>[d(t,{style:{width:"100px"},value:A.value.range.frontHeight,"onUpdate:value":a[12]||(a[12]=e=>A.value.range.frontHeight=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:10},{default:s((()=>[d(l,{label:"后缘高程",name:["range","rearHeight"]},{default:s((()=>[d(t,{style:{width:"100px"},value:A.value.range.rearHeight,"onUpdate:value":a[13]||(a[13]=e=>A.value.range.rearHeight=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"]),d(r,{size:z.value,type:"flex",justify:"space-around",gutter:[0,16]},{default:s((()=>[d(u,{span:15},{default:s((()=>[d(l,{label:"前缘宽度",name:["range","frontWidth"]},{default:s((()=>[d(t,{style:{width:"100px"},value:A.value.range.frontWidth,"onUpdate:value":a[14]||(a[14]=e=>A.value.range.frontWidth=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:8},{default:s((()=>[d(l,{label:"后缘宽度",name:["range","rearWidth"]},{default:s((()=>[d(t,{style:{width:"100px"},value:A.value.range.rearWidth,"onUpdate:value":a[15]||(a[15]=e=>A.value.range.rearWidth=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"])])),_:1}),d(r,null,{default:s((()=>[d(u,{span:8},{default:s((()=>[d(l,{label:"前后缘高程差",name:["range","diff"]},{default:s((()=>[d(t,{style:{width:"100px"},value:A.value.range.diff,"onUpdate:value":a[16]||(a[16]=e=>A.value.range.diff=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:8},{default:s((()=>[d(l,{label:"范围",name:["range","area"]},{default:s((()=>[d(t,{style:{width:"100px"},value:A.value.range.area,"onUpdate:value":a[17]||(a[17]=e=>A.value.range.area=e)},null,8,["value"])])),_:1})])),_:1})])),_:1}),d(r,null,{default:s((()=>[d(u,{span:6,style:{border:"3px solid black","text-align":"center"}},{default:s((()=>[g("位置/坐标")])),_:1}),d(u,{span:6,style:{border:"3px solid black"}},{default:s((()=>[g("经度(°)")])),_:1}),d(u,{span:6,style:{border:"3px solid black"}},{default:s((()=>[g("纬度(°)")])),_:1}),d(u,{span:6,style:{border:"3px solid black"}},{default:s((()=>[g("高程(m)")])),_:1})])),_:1}),d(r,{size:z.value,type:"flex",justify:"center",gutter:[0,16]},{default:s((()=>[d(u,{span:6},{default:s((()=>[g("西北角")])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","northwestCorner","longitude"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.northwestCorner.longitude,"onUpdate:value":a[18]||(a[18]=e=>A.value.coordinate.northwestCorner.longitude=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","northwestCorner","latitude"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.northwestCorner.latitude,"onUpdate:value":a[19]||(a[19]=e=>A.value.coordinate.northwestCorner.latitude=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","northwestCorner","height"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.northwestCorner.height,"onUpdate:value":a[20]||(a[20]=e=>A.value.coordinate.northwestCorner.height=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"]),d(r,{size:z.value,type:"flex",justify:"center",gutter:[0,16]},{default:s((()=>[d(u,{span:6},{default:s((()=>[g("东北角")])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","northwestCorner","longitude"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.northeastCorner.longitude,"onUpdate:value":a[21]||(a[21]=e=>A.value.coordinate.northeastCorner.longitude=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","northwestCorner","latitude"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.northeastCorner.latitude,"onUpdate:value":a[22]||(a[22]=e=>A.value.coordinate.northeastCorner.latitude=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","northwestCorner","height"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.northeastCorner.height,"onUpdate:value":a[23]||(a[23]=e=>A.value.coordinate.northeastCorner.height=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"]),d(r,{size:z.value,type:"flex",justify:"center",gutter:[0,16]},{default:s((()=>[d(u,{span:6},{default:s((()=>[g("西南角")])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","southwestCorner","longitude"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.southwestCorner.longitude,"onUpdate:value":a[24]||(a[24]=e=>A.value.coordinate.southwestCorner.longitude=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","southwestCorner","latitude"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.southwestCorner.latitude,"onUpdate:value":a[25]||(a[25]=e=>A.value.coordinate.southwestCorner.latitude=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","southwestCorner","height"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.southwestCorner.height,"onUpdate:value":a[26]||(a[26]=e=>A.value.coordinate.southwestCorner.height=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"]),d(r,{size:z.value,type:"flex",justify:"center",gutter:[0,16]},{default:s((()=>[d(u,{span:6},{default:s((()=>[g("东南角")])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","southeastCorner","longitude"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.southeastCorner.longitude,"onUpdate:value":a[27]||(a[27]=e=>A.value.coordinate.southeastCorner.longitude=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","southeastCorner","latitude"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.southeastCorner.latitude,"onUpdate:value":a[28]||(a[28]=e=>A.value.coordinate.southeastCorner.latitude=e)},null,8,["value"])])),_:1})])),_:1}),d(u,{span:6},{default:s((()=>[d(l,{name:["coordinate","southeastCorner","height"]},{default:s((()=>[d(t,{style:{width:"140px"},value:A.value.coordinate.southeastCorner.height,"onUpdate:value":a[29]||(a[29]=e=>A.value.coordinate.southeastCorner.height=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["size"])])),_:1}),d(l,{label:"地质环境条件",name:"geology","wrapper-col":{span:5,offset:5}},{default:s((()=>[d(t,{style:{width:"350px"},value:A.value.geology,"onUpdate:value":a[30]||(a[30]=e=>A.value.geology=e)},null,8,["value"])])),_:1}),d(l,{label:"kml",name:"fileUrl","wrapper-col":{span:5,offset:5}},{default:s((()=>[d(t,{style:{width:"350px"},value:A.value.coordinate.fileUrl,"onUpdate:value":a[31]||(a[31]=e=>A.value.coordinate.fileUrl=e)},null,8,["value"])])),_:1}),d(l,{"wrapper-col":{span:14,offset:10}},{default:s((()=>[d(c,{type:"primary",onClick:H},{default:s((()=>[g("Create")])),_:1}),d(c,{style:{"margin-left":"10px"},onClick:k},{default:s((()=>[g("Cancel")])),_:1})])),_:1})])),_:1},8,["model","label-col","wrapper-col"])])),_:1},8,["visible"])}}}),[["__scopeId","data-v-4ab4494e"]]);export{p as default};

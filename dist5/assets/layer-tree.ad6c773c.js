import{f as e,c as t}from"./map.852ebca3.js";import{a}from"./index.03bb1a20.js";import{y as s,Y as n,r,p as d,aj as l,a as o,G as c,H as i,P as h,ap as u,ab as p}from"./index.3e972bdf.js";const m=s({__name:"layer-tree",setup(s){const{currentWidget:m}=n.exports.useWidget(),f=r([]);let g=0;function b(e){if(!e)return[];g++;const t=[];return e.forEach((e=>{const a={};a.title=e.name?e.name:"element",a.key=g+"-"+Math.random(),a.id=e.id,a.sphere=e.sphere;const s=b(e.children);return 0!==s.length&&(a.children=s),t.push(a)})),t}d((async()=>{const e=m.data.url,t=e.substring(0,e.lastIndexOf("/")+1)+"scenetree.json",s=await a.get(t);if(s.data){let e=s.data;s.data.scenes&&(e=s.data.scenes[0]);const t=b(e.children);f.value.push({title:e.name,key:g,id:e.id,sphere:e.sphere?e.sphere:null,children:t})}else f.value=[]}));const j=(t,a)=>{const s=u(m.data.id);e(s,a.node.sphere)},k=(e,a)=>{const s=u(m.data.id);e.length>2e3?p(`勾选数据${e.length}大于2000，请减少勾选数量。`):t(s,a.checkedNodes)};return(e,t)=>{const a=l("mars-tree"),s=l("mars-dialog");return o(),c(s,{draggable:!0,title:"模型构件",width:"320","min-width":320,top:"70",bottom:"50",left:"10"},{default:i((()=>[h(a,{checkable:"","tree-data":f.value,onSelect:j,onCheck:k},null,8,["tree-data"])])),_:1})}}});export{m as default};

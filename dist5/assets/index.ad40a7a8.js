import{a9 as e,_ as o,y as t,aj as i,a as r,G as n,H as a,P as l,a0 as s}from"./index.3e972bdf.js";import{u as c}from"./use-lifecycle.fdbeda11.js";const f=e.exports.Cesium;let d,p;function u(){d.graphicLayer.clear(),d.graphicLayer.startDraw({type:"circle",style:{color:"#ffff00",opacity:.2,clampToGround:!0},success:function(o){let t=o.positionShow;t=e.exports.PointUtil.addPositionsHeight(t,1.5);const i=o.getOutlinePositions(!1,45);d.graphicLayer.clear(),d.scene.globe.depthTestAgainstTerrain=!0;for(let r=0;r<i.length;r++){let o=i[r];o=e.exports.PointUtil.getSurfacePosition(d.scene,o),p.add(t,o)}y(t,!0),d.scene.globe.depthTestAgainstTerrain=!1}})}function g(){d.graphicLayer.clear(),d.graphicLayer.startDraw({type:"polyline",maxPointNum:2,style:{color:"#55ff33",width:3},success:function(e){const o=e.positionsShow;d.graphicLayer.clear();const t=o[0],i=o[1];p.add(t,i,{offsetHeight:1.5}),y(t,!0),y(i,!1),d.scene.globe.depthTestAgainstTerrain=!1}})}function h(){p.clear(),d.graphicLayer.clear()}function y(o,t){const i=new e.exports.graphic.PointEntity({position:o,style:{color:f.Color.fromCssColorString("#3388ff"),pixelSize:6,outlineColor:f.Color.fromCssColorString("#ffffff"),outlineWidth:2,scaleByDistance:new f.NearFarScalar(150,1,8e6,.2),label:{text:t?"观察位置":"目标点",font_size:17,font_family:"楷体",color:f.Color.AZURE,outline:!0,outlineColor:f.Color.BLACK,outlineWidth:2,horizontalOrigin:f.HorizontalOrigin.CENTER,verticalOrigin:f.VerticalOrigin.BOTTOM,pixelOffset:new f.Cartesian2(0,-20),distanceDisplayCondition:new f.DistanceDisplayCondition(0,2e6)}}});return d.graphicLayer.addGraphic(i),i}var C=Object.freeze(Object.defineProperty({__proto__:null,get map(){return d},onMounted:function(o){d=o,p=new e.exports.thing.Sightline({visibleColor:new f.Color(0,1,0,.4),hiddenColor:new f.Color(1,0,0,.4)}),d.addThing(p)},onUnmounted:function(){d.graphicLayer.clear(),p.remove(!0),d=null},drawCircle:u,drawLine:g,clearAll:h},Symbol.toStringTag,{value:"Module"}));var m=o(t({__name:"index",setup(e){c(C);const o=()=>{g()},t=()=>{u()},f=()=>{h()};return(e,c)=>{const d=i("mars-button"),p=i("a-space"),u=i("mars-dialog");return r(),n(u,{visible:!0,left:"10",top:"300"},{default:a((()=>[l(p,null,{default:a((()=>[l(d,{onClick:o},{default:a((()=>[s("通视分析")])),_:1}),l(d,{onClick:t},{default:a((()=>[s("圆形通视分析")])),_:1}),l(d,{onClick:f},{default:a((()=>[s("清除")])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-79fb1d80"]]);export{m as default};

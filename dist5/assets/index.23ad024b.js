import{u as e}from"./use-lifecycle.fdbeda11.js";import{a9 as t,_ as a,y as l,r as n,p as o,M as i,aj as r,a as u,G as s,H as p,P as d,d as c,a0 as f}from"./index.3e972bdf.js";let g;const v=new t.exports.BaseClass;function m(){const e=g.getCenter();return e.format(),{lng:e.lng,lat:e.lat,alt:e.alt}}function S(e,a){return t.exports.Util.formatNum(e,a)}function y(e){return t.exports.PointTrans.degree2dms(e)}function h(e,a,l){return"2"===l?t.exports.PointTrans.proj4Trans([e,a],t.exports.CRS.EPSG4326,t.exports.CRS.CGCS2000_GK_Zone_6):t.exports.PointTrans.proj4Trans([e,a],t.exports.CRS.EPSG4326,t.exports.CRS.CGCS2000_GK_Zone_3)}function C(e,a,l){return t.exports.PointTrans.dms2degree(e,a,l)}function _(e,a,l){return"2"===l?t.exports.PointTrans.proj4Trans([e,a],t.exports.CRS.CGCS2000_GK_Zone_6,t.exports.CRS.EPSG4326):t.exports.PointTrans.proj4Trans([e,a],t.exports.CRS.CGCS2000_GK_Zone_3,t.exports.CRS.EPSG4326)}function b(){g.setCursor("crosshair"),g.once(t.exports.EventType.click,(function(e){g.setCursor("");const a=e.cartesian,l=t.exports.LngLatPoint.fromCartesian(a);l.format(),v.fire("clickMap",{point:l}),M(!1,l.lng,l.lat,l.alt)}))}let x;function M(e,a,l,n){const o=[a,l,n];null==x?(x=new t.exports.graphic.PointEntity({position:o,style:{color:"#3388ff",pixelSize:10,outlineColor:"#ffffff",outlineWidth:2}}),g.graphicLayer.addGraphic(x)):x.position=o,e&&x.flyTo({radius:1e3})}var F=Object.freeze(Object.defineProperty({__proto__:null,eventTarget:v,onMounted:function(e){g=e},onUnmounted:function(){x&&(x.remove(),x=null),v.off(),g=null},defultPoint:m,marsUtilFormtNum:S,marsPointTrans:y,marsProj4Trans:h,marsDms2degree:C,marsZONEtoCRS:_,bindMourseClick:b,updateMarker:M},Symbol.toStringTag,{value:"Module"}));const k={class:"position-container"},G={class:"f-pt f-tac"};var P=a(l({__name:"index",setup(t){e(F);const a=n();o((()=>{const e=m();D(e),E(e),R(e)}));const l=[{type:"radio",field:"type",label:"类型",value:"1",data:[{label:"十进制",value:"1"},{label:"度分秒",value:"2"},{label:"平面坐标",value:"3"}]},{type:"input",field:"lng",label:"经度",value:"",show:e=>"1"===e.type,change(e,t){x(t)}},{type:"input",field:"lat",label:"纬度",value:"",show:e=>"1"===e.type,change(e,t){x(t)}},{type:"input",field:"alt",label:"高程",value:"",show:e=>"1"===e.type,change(e,t){x(t)}},{type:"inputGroup",field:"lngDMS",label:"经度",value:[0,0,0],units:["度","分","秒"],show:e=>"2"===e.type,change(e,t){P(t)}},{type:"inputGroup",field:"latDMS",label:"纬度",value:[0,0,0],units:["度","分","秒"],show:e=>"2"===e.type,change(e,t){P(t)}},{type:"input",field:"altDMS",label:"高程",value:"",show:e=>"2"===e.type,change(e,t){P(t)}},{type:"radio",field:"radioFendai",label:"分带",value:"1",data:[{label:"三度带",value:"1"},{label:"六度带",value:"2"}],change(e,t){g(t)},show:e=>"3"===e.type},{type:"input",field:"gk6X",label:"纵坐标",value:"",show:e=>"3"===e.type,change(e,t){T(t)}},{type:"input",field:"gk6Y",label:"横坐标",value:"",show:e=>"3"===e.type,change(e,t){T(t)}},{type:"input",field:"gkAlt",label:"高度值",value:"",show:e=>"3"===e.type,change(e,t){T(t)}}],g=e=>{j(e),R(e)},x=e=>{E(e),R(e)},P=e=>{a.value.updateField("lng",C(S(e.lngDMS[0],6),S(e.lngDMS[1],6),S(e.lngDMS[2],6))),a.value.updateField("lat",C(S(e.latDMS[0],6),S(e.latDMS[1],6),S(e.latDMS[2],6))),a.value.updateField("alt",e.altDMS),R(e)},T=e=>{j(e),E(e)},w=()=>{b()};v.on("clickMap",(e=>{const t=i({lng:e.point.lng,lat:e.point.lat,alt:e.point.alt});D(t),E(t),R(t),M(!1,t.lng,t.lat,t.alt)}));const D=e=>{a.value.updateField("lng",S(e.lng,6)),a.value.updateField("lat",S(e.lat,6)),a.value.updateField("alt",S(e.alt,6))},j=e=>{const t=_(Number(e.gk6X),Number(e.gk6Y),e.radioFendai);a.value.updateField("lng",S(t[0],6)),a.value.updateField("lat",S(t[1],6)),a.value.updateField("alt",e.gkAlt)},R=e=>{const t=h(S(e.lng,6),S(e.lat,6),a.value.getValue("radioFendai"));a.value.updateField("gk6X",S(t[0],1)),a.value.updateField("gk6Y",S(t[1],1)),a.value.updateField("gkAlt",S(e.alt,6))},E=e=>{const t=[y(e.lng).degree,y(e.lng).minute,y(e.lng).second],l=[y(e.lat).degree,y(e.lat).minute,y(e.lat).second];a.value.updateField("lngDMS",t),a.value.updateField("latDMS",l),a.value.updateField("altDMS",S(e.alt,6))},N=()=>{const e=a.value.getValues();M(!0,e.lng,e.lat,e.alt)};return(e,t)=>{const n=r("mars-icon"),o=r("mars-gui"),i=r("a-form"),g=r("mars-button"),v=r("a-space"),m=r("mars-dialog");return u(),s(m,{title:"坐标拾取",width:"356",top:"100",right:"10","min-width":357},{icon:p((()=>[d(n,{icon:"local",width:"18"})])),default:p((()=>[c("div",k,[d(i,null,{default:p((()=>[d(o,{ref_key:"marsGuiRef",ref:a,options:l,labelCol:"4"},null,512)])),_:1}),c("div",G,[d(v,null,{default:p((()=>[d(g,{onClick:w},{default:p((()=>[f("图上拾取")])),_:1}),d(g,{onClick:N},{default:p((()=>[f("坐标定位")])),_:1})])),_:1})])])])),_:1})}}}),[["__scopeId","data-v-f89e0d34"]]);export{P as default};
